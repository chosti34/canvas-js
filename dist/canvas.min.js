function Application(){this.canvas=this.getCanvasById("canvas"),this.rectangle=new Rectangle("#0ff","#f00"),this.circle=new Circle("#ff0","#f00"),this.triangle=new Triangle("#f0f","#09f"),this.hideInterfaceItems(),this.setHandlerOnShapeSelector(),this.setHandlerOnDrawButton(),this.setHandlerOnClearButton(),this.setHandlerOnInputChange()}function Canvas(a,b,c){this.context=a,this.width=b,this.height=c,this.initialize()}function Circle(a,b){Shape.apply(this,arguments),this.x=350,this.y=230,this.radius=50}function Rectangle(a,b){Shape.apply(this,arguments),this.x=300,this.y=200,this.width=120,this.height=110}function Shape(a,b){this.setFillColor(a),this.setBorderColor(b)}function Triangle(a,b){Shape.apply(this,arguments),this.x1=340,this.y1=151,this.x2=280,this.y2=320,this.x3=165,this.y3=125}function calculateDistance(a,b,c,d){return Math.sqrt((a-c)*(a-c)+(b-d)*(b-d))}Application.prototype.getCanvasById=function(a){var b=document.getElementById(a);return new Canvas(b.getContext("2d"),b.width,b.height)},Application.prototype.changeFillAndBorderColors=function(){var a=this.getSelectedShape().getFillColor(),b=this.getSelectedShape().getBorderColor(),c=document.getElementById("outlineThickness").value;this.canvas.context.fillStyle=a,this.canvas.context.strokeStyle=b,this.canvas.context.lineWidth=c},Application.prototype.getParamsAndDrawRectangle=function(){this.canvas.clear("#fff"),this.changeFillAndBorderColors();var a=document.getElementById("rectangleX").value,b=document.getElementById("rectangleY").value,c=document.getElementById("rectangleWidth").value,d=document.getElementById("rectangleHeight").value;a>0&&b>0&&c>0&&d>0&&(this.rectangle.x=document.getElementById("rectangleX").value,this.rectangle.y=document.getElementById("rectangleY").value,this.rectangle.width=document.getElementById("rectangleWidth").value,this.rectangle.height=document.getElementById("rectangleHeight").value),this.canvas.print("Area: "+this.rectangle.calculateArea().toFixed(2),460,430,"#000"),this.canvas.print("Perimeter: "+this.rectangle.calculatePerimeter().toFixed(2),460,460,"#000"),this.rectangle.draw(this.canvas)},Application.prototype.getParamsAndDrawTriangle=function(){this.canvas.clear("#fff"),this.changeFillAndBorderColors();var a=document.getElementById("triangleX1").value,b=document.getElementById("triangleY1").value,c=document.getElementById("triangleX2").value,d=document.getElementById("triangleY2").value,e=document.getElementById("triangleX3").value,f=document.getElementById("triangleY3").value;a>0&&c>0&&e>0&&b>0&&d>0&&f>0&&(this.triangle.x1=a,this.triangle.x2=c,this.triangle.x3=e,this.triangle.y1=b,this.triangle.y2=d,this.triangle.y3=f),this.canvas.print("Area: "+this.triangle.calculateArea().toFixed(2),460,430,"#000"),this.canvas.print("Perimeter: "+this.triangle.calculatePerimeter().toFixed(2),460,460,"#000"),this.triangle.draw(this.canvas)},Application.prototype.getParamsAndDrawCircle=function(){this.canvas.clear("#fff"),this.changeFillAndBorderColors();var a=document.getElementById("circleX").value,b=document.getElementById("circleY").value,c=document.getElementById("circleRadius").value;a>0&&b>0&&c>0&&(this.circle.x=a,this.circle.y=b,this.circle.radius=c),this.canvas.print("Area: "+this.circle.calculateArea().toFixed(2),450,430,"#000"),this.canvas.print("Perimeter: "+this.circle.calculatePerimeter().toFixed(2),450,460,"#000"),this.circle.draw(this.canvas)},Application.prototype.hideInterfaceItems=function(){document.getElementById("colorParams").style.display="none",document.getElementById("rectangleParams").style.display="none",document.getElementById("triangleParams").style.display="none",document.getElementById("circleParams").style.display="none"},Application.prototype.setHandlerOnShapeSelector=function(){var a=this;document.getElementById("shapeSelector").addEventListener("change",function(){switch(document.getElementById("shapeSelector").value){case"Rectangle":a.setRectangleValuesToInput(),a.getParamsAndDrawRectangle(),document.getElementById("colorParams").style.display="block",document.getElementById("rectangleParams").style.display="block",document.getElementById("triangleParams").style.display="none",document.getElementById("circleParams").style.display="none";break;case"Triangle":a.setTriangleValuesToInput(),a.getParamsAndDrawTriangle(),document.getElementById("colorParams").style.display="block",document.getElementById("rectangleParams").style.display="none",document.getElementById("triangleParams").style.display="block",document.getElementById("circleParams").style.display="none";break;case"Circle":a.setCircleValuesToInput(),a.getParamsAndDrawCircle(),document.getElementById("colorParams").style.display="block",document.getElementById("rectangleParams").style.display="none",document.getElementById("triangleParams").style.display="none",document.getElementById("circleParams").style.display="block";break;default:a.hideInterfaceItems(),a.canvas.clear("#fff")}})},Application.prototype.setHandlerOnDrawButton=function(){var a=this;document.getElementById("canvasDrawButton").addEventListener("click",function(){var b=document.getElementById("shapeSelector");switch(b.options[b.selectedIndex].value){case"Rectangle":a.setRectangleValuesToInput(),a.getParamsAndDrawRectangle();break;case"Triangle":a.setTriangleValuesToInput(),a.getParamsAndDrawTriangle();break;case"Circle":a.setCircleValuesToInput(),a.getParamsAndDrawCircle();break;default:alert("Please, choose shape")}})},Application.prototype.setHandlerOnClearButton=function(){var a=this;document.getElementById("canvasClearButton").onclick=function(){a.canvas.clear("#fff"),a.clearInputValues()}},Application.prototype.setHandlerOnInputChange=function(){var a=this;document.getElementById("fillColor").addEventListener("input",function(){var b=document.getElementById("fillColor").value;switch(document.getElementById("shapeSelector").value){case"Rectangle":a.rectangle.setFillColor(b),a.getParamsAndDrawRectangle();break;case"Triangle":a.triangle.setFillColor(b),a.getParamsAndDrawTriangle();break;case"Circle":a.circle.setFillColor(b),a.getParamsAndDrawCircle()}}),document.getElementById("borderColor").addEventListener("input",function(){var b=document.getElementById("borderColor").value;switch(document.getElementById("shapeSelector").value){case"Rectangle":a.rectangle.setBorderColor(b),a.getParamsAndDrawRectangle();break;case"Triangle":a.triangle.setBorderColor(b),a.getParamsAndDrawTriangle();break;case"Circle":a.circle.setBorderColor(b),a.getParamsAndDrawCircle()}}),document.getElementById("outlineThickness").addEventListener("input",function(){switch(document.getElementById("shapeSelector").value){case"Rectangle":a.getParamsAndDrawRectangle();break;case"Triangle":a.getParamsAndDrawTriangle();break;case"Circle":a.getParamsAndDrawCircle()}}),document.getElementById("rectangleX").addEventListener("input",function(){a.rectangle.x=document.getElementById("rectangleX").value,a.getParamsAndDrawRectangle()}),document.getElementById("rectangleY").addEventListener("input",function(){a.rectangle.y=document.getElementById("rectangleY").value,a.getParamsAndDrawRectangle()}),document.getElementById("rectangleWidth").addEventListener("input",function(){a.rectangle.width=document.getElementById("rectangleWidth").value,a.getParamsAndDrawRectangle()}),document.getElementById("rectangleHeight").addEventListener("input",function(){a.rectangle.height=document.getElementById("rectangleHeight").value,a.getParamsAndDrawRectangle()}),document.getElementById("circleX").addEventListener("input",function(){a.circle.x=document.getElementById("circleX").value,a.getParamsAndDrawCircle()}),document.getElementById("circleY").addEventListener("input",function(){a.circle.y=document.getElementById("circleY").value,a.getParamsAndDrawCircle()}),document.getElementById("circleRadius").addEventListener("input",function(){a.circle.radius=document.getElementById("circleRadius").value,a.getParamsAndDrawCircle()}),document.getElementById("triangleX1").addEventListener("input",function(){a.triangle.x1=document.getElementById("triangleX1").value,a.getParamsAndDrawTriangle()}),document.getElementById("triangleX2").addEventListener("input",function(){a.triangle.x2=document.getElementById("triangleX2").value,a.getParamsAndDrawTriangle()}),document.getElementById("triangleX3").addEventListener("input",function(){a.triangle.x3=document.getElementById("triangleX3").value,a.getParamsAndDrawTriangle()}),document.getElementById("triangleY1").addEventListener("input",function(){a.triangle.y1=document.getElementById("triangleY1").value,a.getParamsAndDrawTriangle()}),document.getElementById("triangleY2").addEventListener("input",function(){a.triangle.y2=document.getElementById("triangleY2").value,a.getParamsAndDrawTriangle()}),document.getElementById("triangleY3").addEventListener("input",function(){a.triangle.y3=document.getElementById("triangleY3").value,a.getParamsAndDrawTriangle()})},Application.prototype.setCanvasValuesToInput=function(){document.getElementById("fillColor").value=this.getSelectedShape().getFillColor(),document.getElementById("borderColor").value=this.getSelectedShape().getBorderColor(),document.getElementById("outlineThickness").value=this.canvas.context.lineWidth},Application.prototype.setRectangleValuesToInput=function(){this.setCanvasValuesToInput(),document.getElementById("rectangleX").value=this.rectangle.x,document.getElementById("rectangleY").value=this.rectangle.y,document.getElementById("rectangleWidth").value=this.rectangle.width,document.getElementById("rectangleHeight").value=this.rectangle.height},Application.prototype.setTriangleValuesToInput=function(){this.setCanvasValuesToInput(),document.getElementById("triangleX1").value=this.triangle.x1,document.getElementById("triangleY1").value=this.triangle.y1,document.getElementById("triangleX2").value=this.triangle.x2,document.getElementById("triangleY2").value=this.triangle.y2,document.getElementById("triangleX3").value=this.triangle.x3,document.getElementById("triangleY3").value=this.triangle.y3},Application.prototype.setCircleValuesToInput=function(){this.setCanvasValuesToInput(),document.getElementById("circleX").value=this.circle.x,document.getElementById("circleY").value=this.circle.y,document.getElementById("circleRadius").value=this.circle.radius},Application.prototype.clearInputValues=function(){document.getElementById("fillColor").value="",document.getElementById("borderColor").value="",document.getElementById("outlineThickness").value="",document.getElementById("rectangleX").value="",document.getElementById("rectangleY").value="",document.getElementById("rectangleWidth").value="",document.getElementById("rectangleHeight").value="",document.getElementById("circleX").value="",document.getElementById("circleY").value="",document.getElementById("circleRadius").value="",document.getElementById("triangleX1").value="",document.getElementById("triangleY1").value="",document.getElementById("triangleX2").value="",document.getElementById("triangleY2").value="",document.getElementById("triangleX3").value="",document.getElementById("triangleY3").value=""},Application.prototype.getSelectedShape=function(){var a=this;switch(document.getElementById("shapeSelector").value){case"Rectangle":return a.rectangle;case"Triangle":return a.triangle;case"Circle":return a.circle}},Canvas.prototype.initialize=function(){this.context.font="20px Arial",this.context.lineWidth=5},Canvas.prototype.clear=function(a){var b=this.context.fillStyle;this.context.fillStyle=a,this.context.fillRect(0,0,this.width,this.height),this.context.fillStyle=b},Canvas.prototype.drawRect=function(a,b,c,d){this.context.strokeRect(a,b,c,d),this.context.fillRect(a,b,c,d)},Canvas.prototype.drawTriangle=function(a,b,c,d,e,f){this.context.beginPath(),this.context.moveTo(a,b),this.context.lineTo(c,d),this.context.lineTo(e,f),this.context.lineTo(a,b),this.context.stroke(),this.context.closePath(),this.context.fill()},Canvas.prototype.drawCircle=function(a,b,c){this.context.beginPath(),this.context.arc(a,b,c,0,2*Math.PI),this.context.stroke(),this.context.closePath(),this.context.fill()},Canvas.prototype.print=function(a,b,c,d){var e=this.context.measureText(a).width,f=this.context.fillStyle;this.context.fillStyle=d,this.context.fillText(a,this.width-e-20,c),this.context.fillStyle=f},Circle.prototype=Object.create(Shape.prototype),Circle.prototype.constructor=Circle,Circle.prototype.draw=function(a){a.drawCircle(this.x,this.y,this.radius)},Circle.prototype.calculateArea=function(){return Math.PI*this.radius*this.radius},Circle.prototype.calculatePerimeter=function(){return 2*Math.PI*this.radius},Rectangle.prototype=Object.create(Shape.prototype),Rectangle.prototype.constructor=Rectangle,Rectangle.prototype.draw=function(a){a.drawRect(this.x,this.y,this.width,this.height)},Rectangle.prototype.calculateArea=function(){return this.width*this.height},Rectangle.prototype.calculatePerimeter=function(){return 2*this.width+2*this.height},Shape.prototype.setFillColor=function(a){this.fillColor=a},Shape.prototype.getFillColor=function(){return this.fillColor},Shape.prototype.setBorderColor=function(a){this.borderColor=a},Shape.prototype.getBorderColor=function(){return this.borderColor},Shape.prototype.draw=function(a){},Shape.prototype.calculateArea=function(){},Shape.prototype.calculatePerimeter=function(){},Triangle.prototype=Object.create(Shape.prototype),Triangle.prototype.constructor=Triangle,Triangle.prototype.draw=function(a){a.drawTriangle(this.x1,this.y1,this.x2,this.y2,this.x3,this.y3)},Triangle.prototype.calculateArea=function(){return.5*Math.abs((this.x1-this.x3)*(this.y2-this.y3)-(this.x2-this.x3)*(this.y1-this.y3))},Triangle.prototype.calculatePerimeter=function(){return calculateDistance(this.x1,this.y1,this.x2,this.y2)+calculateDistance(this.x2,this.y2,this.x3,this.y3)+calculateDistance(this.x3,this.y3,this.x1,this.y1)},window.onload=function(){new Application};